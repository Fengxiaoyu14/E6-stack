# 计算表达式



# 注意

因为精度问题，请使用double存数据。

# 要求

1. 创建栈类，采用数组描述；
2. 计算数学表达式的值。
   输入数学表达式，输出表达式的计算结果。数学表达式由单个数字和运算符`+`、`-`、`*`、`/`、`(`、`) `构成，例如 `2+3*(4+5)-6/4`。假定表达式输入格式合法。

# 格式

## 输入

第一行一个整数n(1<=n<=100)，代表表达式的个数。
接下来n行，每行一个表达式，保证表达式内的数字为单个整数，表达式内各运算符和数字间没有空格，且表达式的长度不超过2000。

## 输出

每行表达式输出一个浮点数，要求保留两位小数，保证输入表达式合法。

# 样例

## 输入

```C++
3
1+6/1*7+2*1*4+9/1+2*0*9+9+7/(9*5)-1*6-0*8-7-9*2+6-(0-5-2*8-7-9*5*(6-5*5*2*6-2-7-5+6*7+6*9-1*0*0+3*0+2/1-6/6+5))
0-4-1/6*(1-(6/7)-4+6+2+6*1)-1*7+2-8*2+0-(4+6-6*1+(3-8*6/4-6-5)*6/4/8+7-1*4/9*5)-0/6+1-0-2+7-2+6*4-3*6+2/8+6+1*6*2
5-3*9+5/1*5-9+1*8-6-8-4*1+5-2+9/3*2-2/5/(2-6)*2/7-9*0-2+4/6*6*7*8-8-8*6+8*9*(3+0*1/5/2*7*8+0-8*8-5+8/5*2-0)
```

## 输出

```C++
-9197.84
-3.47
-4362.57
```



# 步骤

## 1.中缀表达式转为后缀表达式（逆波兰表达式）

（1）这里定义一个操作符栈stack来保存遇到的操作符，还需要定义string作为后缀表达式输出返回；

（2）首先需要对输入的中缀表达式进行“切片”处理，所谓切片，即对所输入的中缀表达式进行元素分割，这里的每个元素要么是一个操作符（“+-*/()”），要么是一个操作数，把这些元素存储到一个`vector<string>Inputvec`中；

（3）然后依次遍历`Inputvec`中元素，根据其是操作数还是操作符来进行不同的“处理”。这里的处理规则为：

如果是操作数，则直接保存到输出string中；

如果是操作符

如果操作符栈为空，则把操作符入栈；

否则，则比较当前运算符与栈顶操作符优先等级；

如果当前操作符优先等级高，则当前操作符入栈；

否则，弹出栈顶操作符到输出string中；

## 2.后缀表达式求值

一个例子**后缀表达式`3 4 + 5 × 6 -`的计算**
 1.从左至右扫描，将3和4压入堆栈；
 2.遇到+运算符，因此弹出4和3（4为栈顶元素，3为次顶元素，注意与前缀表达式做比较），计算出3+4的值，得7，再将7入栈；
 3.将5入栈；
 4.接下来是×运算符，因此弹出5和7，计算出7×5=35，将35入栈；
 5.将6入栈；
 6.最后是-运算符，计算出35-6的值，即29，由此得出最终结果。

